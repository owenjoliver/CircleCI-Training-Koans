version: 2.1

orbs:
  browser-tools: circleci/browser-tools@1.2.1

jobs:
  build:
    parameters:
      webpack_stats_path:
        type: string
        default: /home/circleci/artifact_testing-<< pipeline.number >>.json

    docker:
    - image: cimg/node:lts-browsers
    working_directory: /tmp
    steps:
    - run:
        name: Creating Dummy Artifacts
        command: |
          echo "my artifact file" > /home/circleci/example.txt;

    - store_artifacts:
          path: << parameters.webpack_stats_path >>
          destination: /

    - store_artifacts:
          path: /home/circleci/artifact_testing-<< pipeline.number >>.json
          destination: /

    - store_artifacts:
          path: /home/circleci/artifact_testing-<< pipeline.number >>.json

    - store_artifacts:
          path: << parameters.webpack_stats_path >>

    - store_artifacts:
          path: ~/artifact_testing-<< pipeline.number >>.json

workflows:
  build:
    jobs:
      - build